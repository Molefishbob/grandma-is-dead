[gd_scene format=3 uid="uid://d1w5ccem33kle"]

[ext_resource type="Script" uid="uid://dfl7nikgxtn3k" path="res://Scripts/Player/Player.cs" id="1_h54ih"]
[ext_resource type="Script" uid="uid://drj33g67u8ho" path="res://Scripts/Player/StateMachine.cs" id="2_ft8w5"]
[ext_resource type="Texture2D" uid="uid://cxfgvvjpc1o6q" path="res://Assets/Sprites/Player/chr_walk_1.png" id="2_ude3g"]
[ext_resource type="Texture2D" uid="uid://cc2y21e42qb8s" path="res://Assets/Sprites/Player/chr_walk_2.png" id="3_jmcll"]
[ext_resource type="Texture2D" uid="uid://dhgmjpc43a4d1" path="res://Assets/Sprites/Player/chr_walk_3.png" id="4_4wape"]
[ext_resource type="Script" uid="uid://br58js2wdy56j" path="res://Scripts/Player/MaskController.cs" id="4_ji083"]
[ext_resource type="AudioStream" uid="uid://0ji3x6f8f1f5" path="res://Assets/Sounds/walk_on_wood_01.ogg" id="5_4wape"]
[ext_resource type="Script" uid="uid://ce3blwailfqca" path="res://Scripts/Player/PlayerAudioController.cs" id="7_t26db"]
[ext_resource type="PackedScene" uid="uid://crkid04qe66pc" path="res://Scenes/Environment/mask_effect_overlay.tscn" id="8_0kmp4"]
[ext_resource type="Texture2D" uid="uid://cblgdtcaaksub" path="res://Assets/Sprites/Player/mask.png" id="12_i5acl"]

[sub_resource type="Animation" id="Animation_t26db"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("3_jmcll")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("MaskSprite:modulate:a")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0.0]
}
tracks/2/type = "bezier"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("MaskSprite:position:y")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}
tracks/3/type = "bezier"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("MaskSprite:position:x")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}
tracks/4/type = "bezier"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("MaskSprite:rotation")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}
tracks/5/type = "bezier"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("MaskSprite:scale:x")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}
tracks/6/type = "bezier"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("MaskSprite:scale:y")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}

[sub_resource type="Animation" id="Animation_fk5o5"]
resource_name = "idle"
length = 1.0001
step = 1.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("3_jmcll")]
}

[sub_resource type="Animation" id="Animation_epg6k"]
resource_name = "mask_on"
length = 0.5714429
step = 0.14285715
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("MaskSprite:position:x")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(2, 2),
"points": PackedFloat32Array(-26.465, -0.25, 0, 0.25, 0, 0, -0.07142858, 0, 0, 0),
"times": PackedFloat32Array(0.14285715, 0.5714286)
}
tracks/1/type = "bezier"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("MaskSprite:position:y")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"handle_modes": PackedInt32Array(2, 2),
"points": PackedFloat32Array(50.885, 0, 0, 0, 0, 0, -0.07142858, 0, 0, 0),
"times": PackedFloat32Array(0.14285715, 0.5714286)
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("MaskSprite:modulate:a")
tracks/2/interp = 1
tracks/2/loop_wrap = false
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.5714286),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, 1.0]
}
tracks/3/type = "bezier"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("MaskSprite:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"handle_modes": PackedInt32Array(2, 2),
"points": PackedFloat32Array(-0.73, -0.25, 0, 0.25, 0, 0, -0.07142858, 0, 0, 0),
"times": PackedFloat32Array(0.14285715, 0.5714286)
}
tracks/4/type = "bezier"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("MaskSprite:scale:x")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"handle_modes": PackedInt32Array(2, 2),
"points": PackedFloat32Array(0.5, -0.25, 0, 0.25, 0, 1, -0.07142858, 0, 0, 0),
"times": PackedFloat32Array(0.14285715, 0.5714286)
}
tracks/5/type = "bezier"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("MaskSprite:scale:y")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"handle_modes": PackedInt32Array(2, 2),
"points": PackedFloat32Array(0.5, -0.25, 0, 0.25, 0, 1, -0.07142858, 0, 0, 0),
"times": PackedFloat32Array(0.14285715, 0.5714286)
}

[sub_resource type="Animation" id="Animation_825xp"]
resource_name = "walk"
length = 0.6666834
loop_mode = 1
step = 0.16666667
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.16666667, 0.33333334, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [ExtResource("2_ude3g"), ExtResource("3_jmcll"), ExtResource("4_4wape"), ExtResource("3_jmcll")]
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("AudioStreamPlayer")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.33333334),
"transitions": PackedFloat32Array(1, 1),
"values": [{
"args": [],
"method": &"PlaySound"
}, {
"args": [],
"method": &"PlaySound"
}]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ji083"]
_data = {
&"RESET": SubResource("Animation_t26db"),
&"idle": SubResource("Animation_fk5o5"),
&"mask_on": SubResource("Animation_epg6k"),
&"walk": SubResource("Animation_825xp")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jmcll"]
size = Vector2(112, 132)

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_4wape"]
random_pitch = 1.122462
random_volume_offset_db = 5.0
streams_count = 1
stream_0/stream = ExtResource("5_4wape")

[node name="Player" type="CharacterBody2D" unique_id=1893895081 node_paths=PackedStringArray("AnimPlayerNode", "StateMachineNode", "SpriteNode")]
scale = Vector2(0.5, 0.5)
collision_mask = 6
script = ExtResource("1_h54ih")
AnimPlayerNode = NodePath("AnimationPlayer")
StateMachineNode = NodePath("StateMachine")
speed = Vector2(250, 250)
SpriteNode = NodePath("Sprite2D")

[node name="Sprite2D" type="Sprite2D" parent="." unique_id=1285927309]
texture = ExtResource("3_jmcll")

[node name="MaskSprite" type="Sprite2D" parent="." unique_id=879815378]
modulate = Color(1, 1, 1, 0)
scale = Vector2(1e-05, 1e-05)
texture = ExtResource("12_i5acl")
script = ExtResource("4_ji083")

[node name="AnimationPlayer" type="AnimationPlayer" parent="." unique_id=1824774761]
libraries/ = SubResource("AnimationLibrary_ji083")

[node name="MaskEffectOverlay" parent="." unique_id=1846264609 node_paths=PackedStringArray("playerNode") instance=ExtResource("8_0kmp4")]
playerNode = NodePath("..")

[node name="StateMachine" type="Node" parent="." unique_id=70807211 node_paths=PackedStringArray("states")]
script = ExtResource("2_ft8w5")
states = []

[node name="IdleState" type="Node" parent="StateMachine" unique_id=1812455858]

[node name="MoveState" type="Node" parent="StateMachine" unique_id=1496057505]

[node name="PickupState" type="Node" parent="StateMachine" unique_id=1597565189]

[node name="CollisionShape2D" type="CollisionShape2D" parent="." unique_id=330222348]
position = Vector2(2, 60)
shape = SubResource("RectangleShape2D_jmcll")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="." unique_id=1180078798]
stream = SubResource("AudioStreamRandomizer_4wape")
script = ExtResource("7_t26db")
sounds = [ExtResource("5_4wape")]
